
<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="../css/tasks.css">
    <script>
      </script>
      <script src="../js/script_page7.js" defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KRJA-web</title>
</head>
<body>
    <header>
        <h1> Асинхронный код </h1>
        <p>Выполнение лабораторных работ по предмету "Разработка веб-приложений", задания по языку JavaScript</p><br>
    </header>
    <main>
        <div id="tasks">
            <h1 class="part">Part I</h1>
            <button id="stop">STOP</button>
        
            <div class="element_task">
                <h2>Задание 1</h2>
                <div>
                    <h3>задача 1</h3>
                    <p>Написать функцию counter(n), которая выводит в консоль раз в секунду числа n, n-1 ... 2, 1, 0 и останавливается. </p>
                    <input type="text" id="input-t1" placeholder="   ">
                    <input type="text" id="answer-t1" placeholder="   ">
                    <button id="start-t1">Запустить</button>
                </div>
                
                <div>
                    <h3>задача 2</h3>
                    <p>Написать функцию createCounter(n), возвращающую объект с методами:
                        start() -- запускает (или возобновляет) счётчик c интервалом 1 секунда: N, N-1.
                        pause() -- приостанавливает счёт, но не сбрасывает счётчик.
                        stop() -- останавливает счёт, сбрасывает счётчик.</p>
                    <input type="text" id="input-t2" placeholder="   ">
                    <input type="text" id="answer-t2" placeholder="   ">
                    <button id="start-t2">Запустить</button>
                    <button id="t2-start">старт</button>
                    <button id="t2-pause">пауза</button>
                    <button id="t2-stop">стоп</button>
                </div>

                <h2>Задание 2</h2>
                <div>
                    <h3>задача 1</h3>
                    <p>Написать функцию delay(N), возвращающую промис, который сделает resolve() через N секунд. </p>
                    <input type="text" id="input-t3" placeholder="   ">
                    <input type="text" id="answer-t3" placeholder="   ">
                    <button id="start-t3">Запустить</button>
                </div>
                <div>
                    <h3>задача 2</h3>
                    <p>Решить задачу со счётчиком N, N-1 ... 2, 1, 0 через функцию delay.</p>
                    <input type="text" id="input-t4" placeholder="   ">
                    <input type="text" id="answer-t4" placeholder="   ">
                    <button id="start-t4">Запустить</button>
                </div>
                <div>
                    <h3>задача 3</h3>
                    <p>Написать функцию, возвращающую название первого репозитория на github.com по имени пользователя <br> 2 последовательных запроса:. </p>
                    <a href="https://api.github.com/users/%USERNAME%">API</a> <br>
                    <input type="text" id="input-t5" placeholder="   " value="lordkuyq">
                    <input type="text" id="answer-t5" placeholder="   ">
                    <input type="text" id="answer-2-t5" placeholder="   ">
                    <button id="start-t5">Запустить</button>
                </div>

                <h2>Задание 3</h2>
                <div>
                    <h3>задача 1</h3>
                    <p>Перепишите, используя async/await вместо .then/catch. <br>
                        В функции getGithubUser замените рекурсию на цикл, используя async/await. </p>

                    <textarea type="text" id="comment-t6"> class HttpError extends Error {
                        constructor(response) {
                          super(`${response.status} for ${response.url}`);
                          this.name = 'HttpError';
                          this.response = response;
                        }
                      }
                      
                      function loadJson(url) {
                        return fetch(url)
                          .then(response => {
                            if (response.status == 200) {
                              return response.json();
                            } else {
                              throw new HttpError(response);
                            }
                          })
                      }
                      
                      // Запрашивается логин, пока github не вернёт существующего пользователя.
                      function getGithubUser() {
                        let name = prompt("Введите логин?", "iliakan");
                      
                        return loadJson(`https://api.github.com/users/${name}`)
                          .then(user => {
                            alert(`Полное имя: ${user.name}.`);
                            return user;
                          })
                          .catch(err => {
                            if (err instanceof HttpError && err.response.status == 404) {
                              alert("Такого пользователя не существует, пожалуйста, повторите ввод.");
                              return demoGithubUser();
                            } else {
                              throw err;
                            }
                          });
                      }
                      
                      getGithubUser(); </textarea><br>
                    <input type="text" id="input-t6" placeholder="   ">
                    <input type="text" id="answer-t6" placeholder="   ">
                    <button id="start-t6">Запустить</button>
                </div>
            </div>
        </div>
        <br><br><br>
    </main>
</body>
<footer>
    <p>Copyright &copy; by KRJA.prod</p>
</footer>
</html>